<?xml version="1.0" encoding="utf-8"?>

<config>
	<global>
		<logfileRootDir>TestResults</logfileRootDir>
		<defaultSnapshot>ICABase</defaultSnapshot>
		<LisaInitScript>
			<file>.\setupScripts\CreateVMs.ps1</file>
		</LisaInitScript>
		<imageStoreDir>\\unc\path</imageStoreDir>
		<email>
			<recipients>
				<to>myboss@mycompany.com</to>
				<to>myself@mycompany.com</to>
			</recipients>
			<sender>myself@mycompany.com</sender>
			<subject>LIS DM tests run</subject>
			<smtpServer>mysmtphost.mycompany.com</smtpServer>
		</email>
		<testParams>
			<param>appGitURL=https://github.com/ColinIanKing/stress-ng</param>
			<param>appGitTag=V0.07.16</param>
			<param>SnapshotName=ICABase</param>
		</testParams>
	</global>
	<testSuites>
		<suite>
			<suiteName>DM</suiteName>
			<suiteTests>
				<suiteTest>DM_loaded</suiteTest>
				<suiteTest>HotAdd_Verify_udev</suiteTest>
				<!--Dynamic Memory â€“ Hot Add-->
				<!-- Basic Hot Add tests -->
				<suiteTest>HotAdd</suiteTest>
				<suiteTest>HotAddStressapptest</suiteTest>
				<suiteTest>DemandPressure</suiteTest>
				<!-- Complex Hot Add tests -->
				<suiteTest>HotRemove</suiteTest>
				<suiteTest>HighPriority</suiteTest>
				<!-- test requires a 3 VMs setup
				<suiteTest>StartupHighCompete</suiteTest> -->
				<!-- Stress Hot Add tests -->
				<suiteTest>Stress_HotAdd_5seconds</suiteTest>
				<suiteTest>Stress_HotAdd_1second</suiteTest>
				<suiteTest>Stress_Large_Chunk</suiteTest>
				<!-- Dynamic Memory - Ballooning -->
				<suiteTest>StartupLowCompete</suiteTest>
				<suiteTest>MinMemHonored</suiteTest>
				<suiteTest>MaxMemHonored</suiteTest>
				<suiteTest>SaveRestore</suiteTest>
				<suiteTest>CleanShutdown</suiteTest>
			</suiteTests>
		</suite>
	</testSuites>
	<testCases>
		<test>
			<testName>DM_loaded</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-01</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=2GB</param>
				<param>startupMem=1024MB</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>DM_VERIFY_LOADED.sh</testScript>
			<files>remote-scripts/ica/DM_VERIFY_LOADED.sh,remote-scripts/ica/utils.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>800</timeout>
		</test>
		<test>
			<testName>HotAdd_Verify_udev</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-02</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=2GB</param>
				<param>startupMem=1024MB</param>
				<param>memWeight=20</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>DM_HotAdd_Verify_udev.sh</testScript>
			<files>remote-scripts/ica/DM_HotAdd_Verify_udev.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>HotAddStressapptest</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-03</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=4GB</param>
				<param>startupMem=1024MB</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
				<param>appGitURL=https://github.com/stressapptest/stressapptest.git</param>
			</testParams>
			<testScript>setupScripts\DM_HotAdd_stressapptest.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>HotAdd</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-04</param>
				<param>Stress_Level=0</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=4GB</param>
				<param>startupMem=1024MB</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_HotAdd_Stress_ng.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>HotRemove</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-05</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=40%</param>
				<param>startupMem=1024MB</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=85%</param>
				<param>startupMem=80%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_HotAddRemove.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>StartupLowCompete</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-06</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=80%</param>
				<param>startupMem=80%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=50%</param>
				<param>startupMem=40%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_StartupLowCompete.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>StartupHighCompete</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-07</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=60%</param>
				<param>startupMem=60%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=40%</param>
				<param>startupMem=40%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=25%</param>
				<param>startupMem=25%</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_RemoveUnderPressure.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1800</timeout>
		</test>
		<test>
			<testName>DemandPressure</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-08</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=20%</param>
				<param>startupMem=20%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_PressureChangesDemand.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1800</timeout>
		</test>
		<test>
			<testName>HighPriority</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-09</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=50%</param>
				<param>startupMem=45%</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=50%</param>
				<param>startupMem=45%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_HighPriority.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>2600</timeout>
		</test>
		<test>
            	<testName>MinMemHonored</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-10</param>
				<param>enableDM=yes</param>
				<param>minMem=40%</param>
				<param>maxMem=80%</param>
				<param>startupMem=70%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=50%</param>
				<param>startupMem=45%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_MinMemHonor.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>MaxMemHonored</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-11</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=80%</param>
				<param>startupMem=80%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=40%</param>
				<param>startupMem=40%</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_MaxMemHonor.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>2600</timeout>
		</test>
		<test>
			<testName>SaveRestore</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-12</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=80%</param>
				<param>startupMem=80%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=20%</param>
				<param>startupMem=20%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_SaveRestore.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1800</timeout>
		</test>
		<test>
			<testName>CleanShutdown</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-13</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=20%</param>
				<param>startupMem=20%</param>
				<param>memWeight=0</param>
				<param>staticMem=1024MB</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=80%</param>
				<param>startupMem=80%</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_CleanShutdown.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>Stress_HotAdd_5seconds</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-14</param>
				<param>Stress_Level=1</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=4GB</param>
				<param>startupMem=1024MB</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_HotAdd_Stress_ng.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>Stress_HotAdd_1second</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-15</param>
				<param>Stress_Level=2</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=4GB</param>
				<param>startupMem=1024MB</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_HotAdd_Stress_ng.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
		<test>
			<testName>Stress_Large_Chunk</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
				<param>TC_COVERED=DM-16</param>
				<param>Stress_Level=3</param>
				<param>enableDM=yes</param>
				<param>minMem=1024MB</param>
				<param>maxMem=8GB</param>
				<param>startupMem=1024MB</param>
				<param>memWeight=100</param>
				<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_HotAdd_Stress_ng.ps1</testScript>
			<files>remote-scripts/ica/check_traces.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1200</timeout>
		</test>
	</testCases>
	<VMs>
		<vm>
			<hvServer>localhost</hvServer>
			<vmName>dm_vm</vmName>
			<os>Linux</os>
			<ipv4></ipv4>
			<sshKey>rhel5_id_rsa.ppk</sshKey>
			<testParams>
				<param>VM2Name=aux_dm_vm</param>
				<param>VM3Name=aux2_dm_vm</param>
			</testParams>
			<suite>DM</suite>
			<hardware>
				<create>true</create>
				<numCPUs>2</numCPUs>
				<memSize>2048</memSize>
				<disableDiff>True</disableDiff>
				<generation>1</generation>
				<nic>VMBus,External</nic>
			</hardware>
		</vm>
		<vm>
			<hvServer>localhost</hvServer>
			<vmName>aux_dm_vm</vmName>
			<os>Linux</os>
			<ipv4></ipv4>
			<sshKey>rhel5_id_rsa.ppk</sshKey>
			<role>nonSUT</role>
			<hardware>
				<create>true</create>
				<numCPUs>2</numCPUs>
				<memSize>2048</memSize>
				<disableDiff>True</disableDiff>
				<generation>1</generation>
				<nic>VMBus,External</nic>
			</hardware>
		</vm>
	</VMs>
</config>
